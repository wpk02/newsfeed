const data = { "sources": [{ "id": 1, "name": "meduza" }, { "id": 6, "name": "3dnews" }, { "id": 7, "name": "nytimes" }, { "id": 8, "name": "forbes" }, { "id": 9, "name": "igromania" }, { "id": 10, "name": "buro237" }, { "id": 11, "name": "rusvesna" }, { "id": 12, "name": "7ya" }, { "id": 14, "name": "aif" }, { "id": 15, "name": "gazetaru" }, { "id": 16, "name": "karpov.courses" }], "categories": [{ "id": 1, "name": "tech" }, { "id": 2, "name": "sport" }, { "id": 3, "name": "fashion" }, { "id": 4, "name": "politics" }, { "id": 5, "name": "other" }, { "id": 6, "name": "karpov.courses" }], "items": [{ "id": 360332, "lang": "ru", "date": "Sun Jun 04 2023 12:03:55 GMT+0300 (Moscow Standard Time)", "title": "Посольство РФ в Сенегале просит россиян не покидать дома из-за протестов", "description": "В стране начались массовые беспорядки после суда над лидером оппозиции.", "image": "https://aif-s3.aif.ru/images/032/619/31d7721d9441a3d7e773ca40d2f59297.jpg", "source_id": 14, "category_id": 4 }, { "id": 360337, "lang": "ru", "date": "Sun Jun 04 2023 11:59:19 GMT+0300 (Moscow Standard Time)", "title": "Аэропорт Кемерово закрыли до утра по техническим причинам", "description": "Некоторые авиарейсы отменены или задерживаются.", "image": "https://aif-s3.aif.ru/images/032/619/f82ff3742b68c3cb45cfef3e2a8113a8.jpg", "source_id": 14, "category_id": 5 }, { "id": 360340, "lang": "ru", "date": "Sun Jun 04 2023 11:52:41 GMT+0300 (Moscow Standard Time)", "title": "Месси получил предложение от «Интер Майами», которым владеет Бэкхем", "description": "Накануне аргентинец официально покинул «ПСЖ».", "image": "https://aif-s3.aif.ru/images/032/619/602c22d2efc632732f5187c100ed451e.jpg", "source_id": 14, "category_id": 2 }, { "id": 360330, "lang": "ru", "date": "Sun Jun 04 2023 11:43:15 GMT+0300 (Moscow Standard Time)", "title": "Число жертв крупнейшего более чем за 20 лет крушения поезда в Индии превысило 300", "description": "Свыше 300 человек погибли в результате крушения поезда в Индии, которое стало самым жестким более чем за 20 лет. Пассажирский поезд столкнулся с грузовым, сошел с рельсов и врезался в другой пассажирский поезд, показало предварительное расследование", "image": "", "source_id": 8, "category_id": 5 }, { "id": 360341, "lang": "ru", "date": "Sun Jun 04 2023 11:41:43 GMT+0300 (Moscow Standard Time)", "title": "Министр железных дорог Индии назвал причину столкновения поездов", "description": "По последним данным, погибли более 300 человек и более 1 тысячи пострадали.", "image": "https://aif-s3.aif.ru/images/032/619/539e27c86559d71f55ed1a1ab230347d.JPG", "source_id": 14, "category_id": 5 }, { "id": 360331, "lang": "ru", "date": "Sun Jun 04 2023 11:41:06 GMT+0300 (Moscow Standard Time)", "title": "Книги в России подорожали на 15–20%", "description": "Чтение бумажных книг становится дорогим удовольствием: за год цены на них выросли на 15–20%. И это не конец: до конца 2023-го ожидается возрастание стоимости еще на 15%. Об этом сообщают «Известия» со ссылкой на Российский книжный союз и издательства. Подорожание книг напрямую...", "image": "https://www.buro247.ru/images/books0406.png", "source_id": 10, "category_id": 5 }, { "id": 360343, "lang": "ru", "date": "Sun Jun 04 2023 11:26:18 GMT+0300 (Moscow Standard Time)", "title": "В Суэцком канале закрыто судоходство из-за сломавшегося нефтяного танкера", "description": "ЧП произошло на 12-м километре канала с грузовозом SEAVIGOUR.", "image": "https://aif-s3.aif.ru/images/032/619/c22eccb445f0abb5492ece0a41de0504.jpg", "source_id": 14, "category_id": 5 }, { "id": 360344, "lang": "ru", "date": "Sun Jun 04 2023 11:22:07 GMT+0300 (Moscow Standard Time)", "title": "Появились кадры обстрелянного ВСУ Шебекино", "description": "На них видны разрушения гражданских объектов.", "image": "https://aif-s3.aif.ru/images/032/619/09f0d84d381386be57b73fbc35b281db.jpg", "source_id": 14, "category_id": 5 }, { "id": 360346, "lang": "ru", "date": "Sun Jun 04 2023 11:07:18 GMT+0300 (Moscow Standard Time)", "title": "Производитель пива Bud потерял миллиарды долларов из-за неудачной рекламы", "description": "На банках с напитком появилось изображение трансгендера Дилана Малвани.", "image": "https://aif-s3.aif.ru/images/032/619/dadaa48e1d57f9ceebef3a38ca245ad1.jpg", "source_id": 14, "category_id": 5 }, { "id": 360335, "lang": "ru", "date": "Sun Jun 04 2023 11:00:00 GMT+0300 (Moscow Standard Time)", "title": "«Это жалкий муж для меня»: как отдавали под венец представительниц знати", "description": "До сих пор браки королевских особ — вопрос не только отношений, но и политики и соблюдения традиций. От множества ограничений страдают и мужчины, но женщины издавна имели гораздо меньше свободы выбирать себе супруга и становились разменными монетами в дипломатических игра отцов и братьев. Их истории описывает Ника Марш в книге «Княжна на продажу», которая выходит в издательстве «Бомбора». Forbes Woman публикует отрывок — о блистательной сестре Александра I", "image": "", "source_id": 8, "category_id": 5 }, { "id": 360347, "lang": "ru", "date": "Sun Jun 04 2023 10:59:22 GMT+0300 (Moscow Standard Time)", "title": "Reuters: в Сингапуре прошла тайная встреча глав разведслужб 20 стран", "description": "По данным собеседников издания, во встрече приняли участие глава разведки США Аврил Хейнс и представитель КНР.", "image": "https://aif-s3.aif.ru/images/032/618/23811997a251e0593bed028a707219d3.jpg", "source_id": 14, "category_id": 4 }, { "id": 360348, "lang": "ru", "date": "Sun Jun 04 2023 10:52:24 GMT+0300 (Moscow Standard Time)", "title": "Аэродром вблизи украинского города Кропивницкий попал под ракетный удар", "description": "По данным Воздушных сил Украины, дроны атаковали объекты инфраструктуры в Сумской области.", "image": "https://aif-s3.aif.ru/images/032/619/a51e86188d32109a2bd3460af27849ba.png", "source_id": 14, "category_id": 5 }, { "id": 360349, "lang": "ru", "date": "Sun Jun 04 2023 10:43:11 GMT+0300 (Moscow Standard Time)", "title": "ВСУ за минувшую ночь обстреляли два района Белгородской области", "description": "Об этом сообщил губернатор региона Вячеслав Гладков.", "image": "https://aif-s3.aif.ru/images/032/618/6030e6f49bf39b7c429d9bd48e473d07.jpg", "source_id": 14, "category_id": 5 }, { "id": 360350, "lang": "ru", "date": "Sun Jun 04 2023 10:27:20 GMT+0300 (Moscow Standard Time)", "title": "Патриарх Кирилл возглавил литургию у «Троицы» в храме Христа Спасителя", "description": "Икону доставили в собор накануне вечером.", "image": "https://aif-s3.aif.ru/images/032/618/d1ade248632bad799ff6dca7185311d2.jpg", "source_id": 14, "category_id": 5 }, { "id": 360351, "lang": "ru", "date": "Sun Jun 04 2023 10:20:35 GMT+0300 (Moscow Standard Time)", "title": "Лесной пожар произошел в Усть-Алданском районе Якутии", "description": "Он произошел в 1,1 км от села Хомустах.", "image": "https://aif-s3.aif.ru/images/032/618/a2557378a08e57c551ea753ae02cb340.png", "source_id": 14, "category_id": 5 }, { "id": 360333, "lang": "ru", "date": "Sun Jun 04 2023 10:18:26 GMT+0300 (Moscow Standard Time)", "title": "Издатели заявили об удорожании книг в России на 20% за год", "description": "Книги в России за год подорожали на 20%, а до конца 2023 года цены прибавят еще 15%, заявили издатели. Они объясняют это увеличением стоимости полиграфических материалов, которые теперь закупаются в Китае и других странах Азии. Кроме того, влияют курс рубля и возможное снижение спроса", "image": "", "source_id": 8, "category_id": 5 }, { "id": 360353, "lang": "ru", "date": "Sun Jun 04 2023 10:14:19 GMT+0300 (Moscow Standard Time)", "title": "Российские войска уничтожили 37 боевиков ВСУ при попытке форсировать Днепр", "description": "Также ликвидировано два пикапа противника.", "image": "https://aif-s3.aif.ru/images/032/618/a2c29c7fd548a78bd652b6edd0242ac0.JPG", "source_id": 14, "category_id": 5 }, { "id": 360354, "lang": "ru", "date": "Sun Jun 04 2023 10:07:56 GMT+0300 (Moscow Standard Time)", "title": "Володин: Польша должна ответить за убийства военнопленных Красной армии", "description": "Председатель Госдумы заявил, что сегодняшние руководители Польши исповедуют идеологию диктатора Юзефа Пилсудского, в основе политики которого была ненависть к России.", "image": "https://aif-s3.aif.ru/images/032/618/1181c897c1dad46ac0a3361549f26e10.jpg", "source_id": 14, "category_id": 4 }, { "id": 360355, "lang": "ru", "date": "Sun Jun 04 2023 10:05:49 GMT+0300 (Moscow Standard Time)", "title": "Власти Латвии планируют продлить ограничения на въезд россиян", "description": "Осенью 2022 года Эстония и Латвия присоединились к Польше, запретившей въезд граждан РФ.", "image": "https://aif-s3.aif.ru/images/032/618/95831ebb4b7801d61126a1bd4d9dcef1.jpg", "source_id": 14, "category_id": 4 }] }

const mainNews = data.items.slice(0, 3)
const smallNews = data.items.slice(3, 12)

const mainNewsContainer = document.querySelector('.articles__big-column')
const smallNewsContainer = document.querySelector('.articles__small-column')

const escapeString = (str) => {
  const symbols = {
    '&': '&amp;',
    '<': '&lt;',
    '>': '&gt;',
  }

  return str.replace(/[&<>]/g, (tag) => symbols[tag] || tag)
}

mainNews.forEach((item) => {
  const template = document.createElement('template')
  const categoryData = data.categories.find(c => c.id === item.category_id)
  const sourceData = data.sources.find(s => s.id === item.source_id)

  template.innerHTML = `
    <article class="main-article">
      <div class="main-article__image-container">
        <img class="main-article__image" src="${encodeURI(item.image)}" alt="Фото новости">
      </div>
      <div class="main-article__content">
        <span class="article-category main-article__category">${escapeString(categoryData.name)}</span>
        <h2 class="main-article__title">${escapeString(item.title)}</h2>
        <p class="main-article__text">${escapeString(item.description)}</p>
        <span class="article-source main-article__source">${escapeString(sourceData.name)}</span>
      </div>
    </article>
  `
  mainNewsContainer.appendChild(template.content)
})

smallNews.forEach((item) => {
  const template = document.createElement('template')
  const sourceData = data.sources.find(s => s.id === item.source_id)
  const dateData = new Date(item.date).toLocaleDateString('ru-RU', { month: 'long', day: 'numeric' })

  template.innerHTML = `
    <article class="small-article">
      <h2 class="small-article__title">${escapeString(item.title)}</h2>
      <p class="small-article__caption">
        <span class="article-date small-article__date">${dateData}</span>
        <span class="article-source small-article__source">${escapeString(sourceData.name)}</span>
      </p>
    </article>
  `

  smallNewsContainer.appendChild(template.content)
})